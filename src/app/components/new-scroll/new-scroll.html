<div class="town-section">

  <div class="header">
    <h3>New Restaurant</h3>

    @if (wards().length > itemCount) {
      <span class="see-all" (click)="goToAll()">
        SEE ALL
      </span>
    }
  </div>

  <div class="scroll-wrapper">

    <div class="scroll-row" #scrollContainer (scroll)="checkScroll()">

      @for (item of wards(); track item.ward.name) {

        <div class="town-card" (click)="goToWard(item)">

          <div class="image"
               [style.backgroundImage]="'url(' + (item.ward.image || 'https://via.placeholder.com/150') + ')'">
          </div>

          <div class="title">{{ item.ward.name }}</div>

          <div class="d-flex align-items-center justify-content-start">
            <span class="d-flex align-items-center justify-content-start star-container">
              4.7
            </span>

            @for (i of starIndexes; track i) {
              <div class="d-flex align-items-center justify-content-start star-container">
                <div class="star-wrapper" [ngStyle]="{
                    'position': 'relative',
                    'width': '8px',
                    'height': '10px',
                    'margin': '0',
                    'padding': '0',
                    'display': 'flex'
                  }">

                  <div [ngStyle]="{
                      color: 'lightgray',
                      fontSize: '10px',
                      lineHeight: '1',
                      position: 'absolute',
                      top: '0',
                      left: '0'
                    }">★
                  </div>

                  <div [ngStyle]="{
                      color: 'red',
                      fontSize: '10px',
                      lineHeight: '1',
                      position: 'absolute',
                      top: '0',
                      left: '0',
                      width: getStarFill(i) + '%',
                      overflow: 'hidden',
                      whiteSpace: 'nowrap'
                    }">★
                  </div>

                </div>
              </div>
            }

          </div>

          <div class="subtitle">{{ item.count }} Restaurant</div>
        </div>

      } 

    </div>

    @if (canScrollLeft()) {
      <button class="scroll-btn left" (click)="scrollLeft()">
        <i class="fas fa-chevron-left"></i>
      </button>
    }

    @if (canScrollRight()) {
      <button class="scroll-btn right" (click)="scrollRight()">
        <i class="fas fa-chevron-right"></i>
      </button>
    }

  </div>

</div>